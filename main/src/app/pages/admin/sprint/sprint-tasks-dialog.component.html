<h2 mat-dialog-title>Tâches pour le Sprint: {{ sprint.nom }}</h2>

<mat-dialog-content>
  <div *ngIf="loadingTasks" class="loading-message">
    Chargement des tâches...
    <mat-spinner diameter="30" class="loading-spinner"></mat-spinner>
  </div>
  <div *ngIf="!loadingTasks && tasks.length === 0" class="no-tasks-message">
    <mat-icon class="message-icon">info_outline</mat-icon>
    Aucune tâche trouvée pour ce sprint.
  </div>

  <mat-list *ngIf="!loadingTasks && tasks.length > 0">
    <mat-list-item *ngFor="let task of tasks">
      <mat-card class="task-card">
        <mat-card-header>
          <mat-card-title>{{ task.nom }}</mat-card-title>
          <mat-card-subtitle>
            Statut:
            <span [ngClass]="{
              'status-badge': true,
              'status-todo': task.statut === 'TODO',
              'status-in-progress': task.statut === 'IN_PROGRESS',
              'status-done': task.statut === 'DONE',
              'status-blocked': task.statut === 'BLOCKED',
              'status-review': task.statut === 'REVIEW'
            }">
              {{ formatStatut(task.statut) }}
            </span>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p *ngIf="task.description"><strong>Description:</strong> {{ task.description }}</p>
          <p><strong>Date Début:</strong> {{ task.dateDebut | date:'shortDate' }}</p>
          <p><strong>Date Fin:</strong> {{ task.dateFin | date:'shortDate' }}</p>
          <p *ngIf="task.storyPoints"><strong>Story Points:</strong> {{ task.storyPoints }}</p>
          <p *ngIf="task.estimatedHours"><strong>Heures Estimées:</strong> {{ task.estimatedHours }}</p>
          <p *ngIf="task.loggedHours"><strong>Heures Loggées:</strong> {{ task.loggedHours }}</p>
          <p *ngIf="task.assignedTo">
            <strong>Affecté à:</strong>
            {{ task.assignedTo.fullName || task.assignedTo.email || task.assignedTo }}
          </p>
        </mat-card-content>
      </mat-card>
    </mat-list-item>
  </mat-list>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="closeDialog()">Fermer</button>
</mat-dialog-actions>